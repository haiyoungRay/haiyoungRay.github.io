(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{357:function(t,e,a){"use strict";a.r(e);var r=a(5),_=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"_1-为什么要做前端监控"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-为什么要做前端监控"}},[t._v("#")]),t._v(" 1. 为什么要做前端监控")]),t._v(" "),a("ul",[a("li",[t._v("更快发现问题和解决问题")]),t._v(" "),a("li",[t._v("做产品的决策依据")]),t._v(" "),a("li",[t._v("提升前端工程师的技术深度和广度,打造简历亮点")]),t._v(" "),a("li",[t._v("为业务扩展提供了更多可能性")])]),t._v(" "),a("h2",{attrs:{id:"_2-前端监控目标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-前端监控目标"}},[t._v("#")]),t._v(" 2. 前端监控目标")]),t._v(" "),a("h3",{attrs:{id:"_2-1-稳定性-stability"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-稳定性-stability"}},[t._v("#")]),t._v(" 2.1 稳定性(stability)")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("错误名称")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("JS错误")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("JS执行错误或者promise异常")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("资源异常")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("script、link等资源加载异常")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("接口错误")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("ajax或fetch请求接口异常")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("白屏")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("页面空白")])])])]),t._v(" "),a("h3",{attrs:{id:"_2-2-用户体验-experience"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-用户体验-experience"}},[t._v("#")]),t._v(" 2.2 用户体验(experience)")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("错误名称")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("加载时间")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("各个阶段的加载时间")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("TTFB(time to first byte)(首字节时间)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("是指浏览器发起第一个请求到数据返回第一个字节所消耗的时间，这个时间包含了网络请求时间、后端处理时间")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("FP(First Paint)(首次绘制)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("首次绘制包括了任何用户自定义的背景绘制，它是将第一个像素点绘制到屏幕的时刻")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("FCP(First Content Paint)(首次内容绘制)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("首次内容绘制是浏览器将第一个DOM渲染到屏幕的时间,可以是任何文本、图像、SVG等的时间")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("FMP(First Meaningful paint)(首次有意义绘制)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("首次有意义绘制是页面可用性的量度标准")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("FID(First Input Delay)(首次输入延迟)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("用户首次和页面交互到页面响应交互的时间")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("卡顿")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("超过50ms的长任务")])])])]),t._v(" "),a("h3",{attrs:{id:"_2-3-业务-business"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-业务-business"}},[t._v("#")]),t._v(" 2.3 业务(business)")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("错误名称")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("PV")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("page view 即页面浏览量或点击量")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("UV")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("指访问某个站点的不同IP地址的人数")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("页面的停留时间")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("用户在每一个页面的停留时间")])])])]),t._v(" "),a("h2",{attrs:{id:"_3-前端监控流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-前端监控流程"}},[t._v("#")]),t._v(" 3. 前端监控流程")]),t._v(" "),a("ul",[a("li",[t._v("前端埋点")]),t._v(" "),a("li",[t._v("数据上报")]),t._v(" "),a("li",[t._v("分析和计算 将采集到的数据进行加工汇总")]),t._v(" "),a("li",[t._v("可视化展示 将数据按各种维度进行展示")]),t._v(" "),a("li",[t._v("监控报警 发现问题后按一定的条件触发报警\n"),a("monitor-test1")],1)]),t._v(" "),a("h3",{attrs:{id:"_3-1常见的埋点方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1常见的埋点方案"}},[t._v("#")]),t._v(" 3.1常见的埋点方案")]),t._v(" "),a("h4",{attrs:{id:"_3-1-1-代码埋点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-1-代码埋点"}},[t._v("#")]),t._v(" 3.1.1 代码埋点")]),t._v(" "),a("ul",[a("li",[t._v("代码埋点，就是以嵌入代码的形式进行埋点,比如需要监控用户的点击事件,会选择在用户点击时,插入一段代码，保存这个监听行为或者直接将监听行为以某一种数据格式直接传递给服务器端")]),t._v(" "),a("li",[t._v("优点是可以在任意时刻，精确的发送或保存所需要的数据信息")]),t._v(" "),a("li",[t._v("缺点是工作量较大")])]),t._v(" "),a("h4",{attrs:{id:"_3-1-2-可视化埋点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-2-可视化埋点"}},[t._v("#")]),t._v(" 3.1.2 可视化埋点")]),t._v(" "),a("ul",[a("li",[t._v("通过可视化交互的手段，代替代码埋点")]),t._v(" "),a("li",[t._v("将业务代码和埋点代码分离，提供一个可视化交互的页面，输入为业务代码，通过这个可视化系统，可以在业务代码中自定义的增加埋点事件等等,最后输出的代码耦合了业务代码和埋点代码")]),t._v(" "),a("li",[t._v("可视化埋点其实是用系统来代替手工插入埋点代码")])]),t._v(" "),a("h4",{attrs:{id:"_3-1-3-无痕埋点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-3-无痕埋点"}},[t._v("#")]),t._v(" 3.1.3 无痕埋点")]),t._v(" "),a("ul",[a("li",[t._v("前端的任意一个事件都被绑定一个标识，所有的事件都别记录下来")]),t._v(" "),a("li",[t._v("通过定期上传记录文件,配合文件解析，解析出来我们想要的数据，并生成可视化报告供专业人员分析")]),t._v(" "),a("li",[t._v("无痕埋点的优点是采集全量数据,不会出现漏埋和误埋等现象")]),t._v(" "),a("li",[t._v("缺点是给数据传输和服务器增加压力，也无法灵活定制数据结构")])]),t._v(" "),a("h2",{attrs:{id:"_4-编写监控采集脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-编写监控采集脚本"}},[t._v("#")]),t._v(" 4. 编写监控采集脚本")]),t._v(" "),a("h3",{attrs:{id:"_4-1-开通日志服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-开通日志服务"}},[t._v("#")]),t._v(" 4.1 开通日志服务")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://sls.console.aliyun.com/lognext/profile",target:"_blank",rel:"noopener noreferrer"}},[t._v("日志服务(Log Service,简称 SLS)"),a("OutboundLink")],1),t._v("是针对日志类数据一站式服务，用户无需开发就能快捷完成数据采集、消费、投递以及查询分析等功能，帮助提升运维、运营效率，建立 DT 时代海量日志处理能力")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://help.aliyun.com/product/28958.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("日志服务帮助文档"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://help.aliyun.com/document_detail/31752.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Web Tracking"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"_5-参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-参考"}},[t._v("#")]),t._v(" 5. 参考")]),t._v(" "),a("h3",{attrs:{id:"_5-1-第三方"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-第三方"}},[t._v("#")]),t._v(" 5.1 第三方")]),t._v(" "),a("h4",{attrs:{id:"_5-1-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-1"}},[t._v("#")]),t._v(" 5.1.1")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.sensorsdata.cn/auto",target:"_blank",rel:"noopener noreferrer"}},[t._v("神策数据"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.growingio.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("GrowingIO"),a("OutboundLink")],1)])]),t._v(" "),a("h4",{attrs:{id:"_5-1-2-开源产品"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-2-开源产品"}},[t._v("#")]),t._v(" 5.1.2 开源产品")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.fundebug.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("fundebug"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/BetterJS/doc",target:"_blank",rel:"noopener noreferrer"}},[t._v("BetterJS"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://sentry.io/welcome/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sentry"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://sentry.io/onboarding/zhufeng/get-started/",target:"_blank",rel:"noopener noreferrer"}},[t._v("@sentry/browser"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"_5-2-defer-和-async"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-defer-和-async"}},[t._v("#")]),t._v(" 5.2 defer 和 async")]),t._v(" "),a("ul",[a("li",[t._v("defer异步下载JavaScript文件,会在HTML解析完成之后"),a("code",[t._v("DOMContentLoaded")]),t._v("事件调用前执行,不会阻塞页面渲染\n"),a("ul",[a("li",[t._v("如果script标签设置了该属性，则浏览器会异步的下载该文件并且不会影响到后续DOM的渲染")]),t._v(" "),a("li",[t._v("如果有多个设置了defer的script标签存在，则会按照顺序执行所有的script")]),t._v(" "),a("li",[t._v("defer脚本会在文档渲染完毕后，DOMContentLoaded事件调用前执行")])])]),t._v(" "),a("li",[t._v("async异步下载JavaScript文件，下载完成之后会立即执行，有可能会阻塞页面渲染\n"),a("ul",[a("li",[t._v("async的设置,会使得script脚本异步的加载并在允许的情况下执行")]),t._v(" "),a("li",[t._v("async的执行,并不会按着script在页面中的顺序来执行，而是谁先加载完谁执行")])])])])])}),[],!1,null,null,null);e.default=_.exports}}]);